.code32

.section .text

.global flush_idt, open_interrupt

flush_idt:
    push %ebp

    mov %esp, %ebp
    mov 8(%ebp), %eax
    lidt (%eax)

    pop %ebp
    ret

open_interrupt:
    sti
    ret

_common_int:
    jmp .

.macro INT num
.global INT\num
int\num:
    pushl $0
    pushl $\num
    jmp _common_int
.endm

INT 0
INT 1
INT 2
INT 3
INT 4
INT 5
INT 6
INT 7
INT 8
INT 9
INT 10
INT 11
INT 12
INT 13
INT 14
INT 15
INT 16
INT 17
INT 18
INT 19
INT 20
INT 21
INT 22
INT 23
INT 24
INT 25
INT 26
INT 27
INT 28
INT 29
INT 30
INT 31
INT 32
INT 33
INT 34
INT 35
INT 36
INT 37
INT 38
INT 39
INT 40
INT 41
INT 42
INT 43
INT 44
INT 45
INT 46
INT 47
INT 48
INT 49
INT 50
INT 51
INT 52
INT 53
INT 54
INT 55
INT 56
INT 57
INT 58
INT 59
INT 60
INT 61
INT 62
INT 63
INT 64
INT 65
INT 66
INT 67
INT 68
INT 69
INT 70
INT 71
INT 72
INT 73
INT 74
INT 75
INT 76
INT 77
INT 78
INT 79
INT 80
INT 81
INT 82
INT 83
INT 84
INT 85
INT 86
INT 87
INT 88
INT 89
INT 90
INT 91
INT 92
INT 93
INT 94
INT 95
INT 96
INT 97
INT 98
INT 99
INT 100
INT 101
INT 102
INT 103
INT 104
INT 105
INT 106
INT 107
INT 108
INT 109
INT 110
INT 111
INT 112
INT 113
INT 114
INT 115
INT 116
INT 117
INT 118
INT 119
INT 120
INT 121
INT 122
INT 123
INT 124
INT 125
INT 126
INT 127
INT 128
INT 129
INT 130
INT 131
INT 132
INT 133
INT 134
INT 135
INT 136
INT 137
INT 138
INT 139
INT 140
INT 141
INT 142
INT 143
INT 144
INT 145
INT 146
INT 147
INT 148
INT 149
INT 150
INT 151
INT 152
INT 153
INT 154
INT 155
INT 156
INT 157
INT 158
INT 159
INT 160
INT 161
INT 162
INT 163
INT 164
INT 165
INT 166
INT 167
INT 168
INT 169
INT 170
INT 171
INT 172
INT 173
INT 174
INT 175
INT 176
INT 177
INT 178
INT 179
INT 180
INT 181
INT 182
INT 183
INT 184
INT 185
INT 186
INT 187
INT 188
INT 189
INT 190
INT 191
INT 192
INT 193
INT 194
INT 195
INT 196
INT 197
INT 198
INT 199
INT 200
INT 201
INT 202
INT 203
INT 204
INT 205
INT 206
INT 207
INT 208
INT 209
INT 210
INT 211
INT 212
INT 213
INT 214
INT 215
INT 216
INT 217
INT 218
INT 219
INT 220
INT 221
INT 222
INT 223
INT 224
INT 225
INT 226
INT 227
INT 228
INT 229
INT 230
INT 231
INT 232
INT 233
INT 234
INT 235
INT 236
INT 237
INT 238
INT 239
INT 240
INT 241
INT 242
INT 243
INT 244
INT 245
INT 246
INT 247
INT 248
INT 249
INT 250
INT 251
INT 252
INT 253
INT 254
INT 255

.data
.global ints
ints:
.long int0
.long int1
.long int2
.long int3
.long int4
.long int5
.long int6
.long int7
.long int8
.long int9
.long int10
.long int11
.long int12
.long int13
.long int14
.long int15
.long int16
.long int17
.long int18
.long int19
.long int20
.long int21
.long int22
.long int23
.long int24
.long int25
.long int26
.long int27
.long int28
.long int29
.long int30
.long int31
.long int32
.long int33
.long int34
.long int35
.long int36
.long int37
.long int38
.long int39
.long int40
.long int41
.long int42
.long int43
.long int44
.long int45
.long int46
.long int47
.long int48
.long int49
.long int50
.long int51
.long int52
.long int53
.long int54
.long int55
.long int56
.long int57
.long int58
.long int59
.long int60
.long int61
.long int62
.long int63
.long int64
.long int65
.long int66
.long int67
.long int68
.long int69
.long int70
.long int71
.long int72
.long int73
.long int74
.long int75
.long int76
.long int77
.long int78
.long int79
.long int80
.long int81
.long int82
.long int83
.long int84
.long int85
.long int86
.long int87
.long int88
.long int89
.long int90
.long int91
.long int92
.long int93
.long int94
.long int95
.long int96
.long int97
.long int98
.long int99
.long int100
.long int101
.long int102
.long int103
.long int104
.long int105
.long int106
.long int107
.long int108
.long int109
.long int110
.long int111
.long int112
.long int113
.long int114
.long int115
.long int116
.long int117
.long int118
.long int119
.long int120
.long int121
.long int122
.long int123
.long int124
.long int125
.long int126
.long int127
.long int128
.long int129
.long int130
.long int131
.long int132
.long int133
.long int134
.long int135
.long int136
.long int137
.long int138
.long int139
.long int140
.long int141
.long int142
.long int143
.long int144
.long int145
.long int146
.long int147
.long int148
.long int149
.long int150
.long int151
.long int152
.long int153
.long int154
.long int155
.long int156
.long int157
.long int158
.long int159
.long int160
.long int161
.long int162
.long int163
.long int164
.long int165
.long int166
.long int167
.long int168
.long int169
.long int170
.long int171
.long int172
.long int173
.long int174
.long int175
.long int176
.long int177
.long int178
.long int179
.long int180
.long int181
.long int182
.long int183
.long int184
.long int185
.long int186
.long int187
.long int188
.long int189
.long int190
.long int191
.long int192
.long int193
.long int194
.long int195
.long int196
.long int197
.long int198
.long int199
.long int200
.long int201
.long int202
.long int203
.long int204
.long int205
.long int206
.long int207
.long int208
.long int209
.long int210
.long int211
.long int212
.long int213
.long int214
.long int215
.long int216
.long int217
.long int218
.long int219
.long int220
.long int221
.long int222
.long int223
.long int224
.long int225
.long int226
.long int227
.long int228
.long int229
.long int230
.long int231
.long int232
.long int233
.long int234
.long int235
.long int236
.long int237
.long int238
.long int239
.long int240
.long int241
.long int242
.long int243
.long int244
.long int245
.long int246
.long int247
.long int248
.long int249
.long int250
.long int251
.long int252
.long int253
.long int254
.long int255
